# 需求总结

基于PRD文档，需要设计一个AI驱动的IDE双空间智能管理插件的原型界面。核心需求是在IDE环境中创建代码空间和文档空间的统一视图，实现AI驱动的智能关联、实时同步和文档生成功能。目标用户是开发者，旨在提升代码文档一体化管理效率。

# 信息架构

```
主界面层级：
├── 顶部菜单栏
│   ├── 文件操作
│   ├── 双空间控制
│   └── AI助手入口
├── 核心工作区（双空间视图）
│   ├── 代码空间（左侧）
│   └── 文档空间（右侧）
├── 侧边功能面板
│   ├── 文件资源管理器
│   ├── 关联管理面板
│   └── AI助手面板
└── 底部状态栏
    ├── 同步状态
    ├── 关联统计
    └── 快捷操作
```

# 页面布局规范

## 主界面布局

### 布局结构
- 整体采用IDE标准布局，保持用户熟悉感
- 双空间采用左右分栏布局（可调整比例）
- 侧边面板可折叠，最大化工作区空间
- 响应式设计，适配不同屏幕尺寸

### 核心组件

**1. 双空间工作区**
```
┌─────────────────────────────────────────────────────┐
│  代码空间 (50%)           │   文档空间 (50%)        │
│ ┌─────────────────────┐   │ ┌─────────────────────┐ │
│ │ // src/api.js       │   │ │ # API Documentation │ │
│ │                     │   │ │                     │ │
│ │ function getData() {│   │ │ ## getData()        │ │
│ │   /** @doc linked */│   │ │                     │ │
│ │   return fetch(...);│   │ │ 获取数据的异步函数    │ │
│ │ }                   │   │ │                     │ │
│ │                     │   │ │ ### 参数            │ │
│ │ [🔗 关联: api.md]    │   │ │ 无                  │ │
│ │                     │   │ │                     │ │
│ └─────────────────────┘   │ └─────────────────────┘ │
└─────────────────────────────────────────────────────┘
```

**2. 关联管理侧边栏**
```
┌───────────关联管理──────────┐
│ 📂 项目文件               │
│   📄 src/api.js    [3个关联] │
│     ├─ 🔗 docs/api.md      │
│     ├─ 🔗 README.md        │
│     └─ 🔗 changelog.md     │
│                           │
│   📄 src/utils.js  [1个关联] │
│     └─ 🔗 docs/utils.md    │
│                           │
│ [➕ 新建关联]              │
│ [🔄 批量同步]              │
│ [⚙️ 设置]                 │
└───────────────────────────┘
```

**3. AI助手面板**
```
┌───────────AI助手──────────┐
│ 💬 输入框                │
│ "为这个函数生成API文档"     │
│ [📤 发送]                │
│                         │
│ 🤖 AI回复               │
│ ┌─────────────────────┐   │
│ │ 我来为getData()函数    │   │
│ │ 生成API文档...       │   │
│ │                     │   │
│ │ 建议的文档结构：      │   │
│ │ - 函数说明         │   │
│ │ - 参数列表         │   │
│ │ - 返回值           │   │
│ └─────────────────────┘   │
│                         │
│ [✅ 应用] [✏️ 编辑] [❌ 拒绝] │
└─────────────────────────┘
```

### 内容组织
- 代码空间：显示源代码，高亮关联标记
- 文档空间：Markdown实时预览，支持编辑模式
- 关联指示器：可视化显示代码文档关联关系
- 状态提示：实时显示同步状态和AI处理状态

### 交互元素
- 拖拽分隔条：调整双空间比例
- 关联热区：点击跳转到对应文档/代码
- 浮动工具栏：快速操作按钮
- 上下文菜单：右键显示相关操作

## 设置界面布局

### 布局结构
- 左侧导航树，右侧设置面板
- 分类管理：基础设置、AI配置、同步策略、界面定制

### 核心组件
```
┌─────────────────────────────────────────┐
│ 设置                                 [X] │
├─────────────────────────────────────────┤
│ 📋 基础设置  │  基础配置               │
│ 🤖 AI配置   │                         │
│ 🔄 同步策略  │  ○ 自动同步             │
│ 🎨 界面定制  │  ● 提醒同步             │
│ 🔧 高级选项  │  ○ 手动同步             │
│             │                         │
│             │  同步延迟: [2秒] ▼       │
│             │                         │
│             │  AI服务商选择:           │
│             │  ● OpenAI               │
│             │  ○ Claude               │
│             │  ○ 本地模型             │
│             │                         │
│             │  [保存设置] [重置]       │
└─────────────────────────────────────────┘
```

# 交互设计

## 核心用户流程

### 1. 首次使用流程
**用户路径：**
```
安装插件 → 打开项目 → 显示欢迎向导 → 配置基本设置 → 
扫描项目文件 → AI分析建议关联 → 用户确认 → 完成初始化
```

**状态变化：**
- 初始状态：插件未激活
- 加载状态：扫描文件和AI分析，显示进度条
- 配置状态：逐步引导用户完成设置
- 就绪状态：显示双空间视图，可正常使用

**反馈机制：**
- 进度条显示初始化进度
- Toast提示操作结果
- 引导高亮关键功能区域
- 成功页面确认初始化完成

### 2. 代码编辑同步流程
**用户路径：**
```
编辑代码 → AI检测变更 → 判断影响范围 → 
显示同步提示 → 用户选择操作 → 执行同步 → 显示结果
```

**状态变化：**
- 编辑态：代码区域显示编辑状态
- 检测态：底部状态栏显示"分析变更中..."
- 决策态：弹出同步建议面板
- 同步态：显示同步进度动画
- 完成态：更新文档内容，显示成功提示

**反馈机制：**
- 实时状态指示器（底部状态栏）
- 非阻塞式通知（右上角Toast）
- 可撤销操作（撤销按钮）
- 详细日志（可展开查看）

### 3. 手动关联建立流程
**用户路径：**
```
选择代码元素 → 右键选择"创建关联" → 
选择目标文档 → 确认关联类型 → 建立关联 → 验证关联
```

**状态变化：**
- 选择态：高亮选中的代码区域
- 搜索态：文档选择器显示可选文档
- 确认态：预览关联效果
- 创建态：建立关联关系
- 验证态：测试关联有效性

### 4. AI文档生成流程
**用户路径：**
```
选择代码 → 触发AI助手 → 输入生成指令 → 
AI分析处理 → 预览生成内容 → 用户确认 → 应用到文档
```

**状态变化：**
- AI思考态：显示"正在分析..."动画
- 生成态：流式显示生成内容
- 预览态：可编辑的预览界面
- 应用态：将内容插入到文档

**异常处理：**
- 网络错误：显示重试按钮和离线提示
- API限制：显示配额信息和替代方案
- 生成失败：提供手动编辑选项
- 内容冲突：显示冲突解决界面

# 视觉规范

## 色彩规范
```
主色调：
- 主色：#007ACC（VS Code蓝）
- 辅助色：#00BCF2（亮蓝，用于强调）
- 成功色：#00A86B（绿色，表示同步成功）
- 警告色：#FF9500（橙色，表示需要注意）
- 错误色：#F44336（红色，表示错误状态）

背景色：
- 主背景：#1E1E1E（深色主题）/#FFFFFF（浅色主题）
- 次背景：#252526（深色）/#F8F8F8（浅色）
- 面板背景：#2D2D30（深色）/#F0F0F0（浅色）

文字颜色：
- 主文字：#CCCCCC（深色主题）/#333333（浅色主题）
- 次要文字：#969696（深色）/#666666（浅色）
- 链接文字：#4FC1FF（深色）/#0066CC（浅色）
- 代码文字：继承编辑器配色方案

边框和分割线：
- 主边框：#464647（深色）/#E1E1E1（浅色）
- 分割线：#3E3E42（深色）/#D4D4D4（浅色）
```

## 字体规范
```
代码字体：
- 字体族：'Fira Code', 'Monaco', 'Menlo', monospace
- 正文：14px/1.5行高
- 小号：12px/1.4行高
- 支持连字和编程字体特性

界面字体：
- 字体族：-apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui
- 标题：16px/粗体
- 正文：14px/常规
- 说明：12px/常规
- 按钮：14px/中等粗细

代码注释字体：
- 使用斜体以区分正常代码
- 颜色相对正常代码降低透明度
- 保持良好的可读性
```

## 间距规范
```
布局间距：
- 大间距：24px（面板之间）
- 中间距：16px（组件之间）
- 小间距：8px（元素之间）
- 紧凑间距：4px（内联元素）

内边距：
- 面板内边距：16px
- 按钮内边距：12px 24px
- 输入框内边距：8px 12px
- 表格单元格：8px

外边距：
- 组件外边距：16px
- 表单项外边距：12px
- 文本段落外边距：8px

特殊间距：
- 双空间分割：2px（分隔条宽度）
- 关联指示器：与代码行高保持一致
- 状态图标：与文字基线对齐
```

## 阴影和圆角
```
阴影规范：
- 浮动面板：0 4px 12px rgba(0,0,0,0.15)
- 按钮悬停：0 2px 8px rgba(0,0,0,0.12)
- 弹出框：0 8px 24px rgba(0,0,0,0.2)
- 无阴影：普通界面元素

圆角规范：
- 按钮圆角：4px
- 面板圆角：6px
- 输入框圆角：3px
- 图片圆角：8px
- 无圆角：分割线、边框等
```

## 动画规范
```
过渡动画：
- 标准过渡：200ms ease-out
- 快速过渡：150ms ease-out
- 慢速过渡：300ms ease-in-out

特效动画：
- 加载动画：旋转、脉冲、骨架屏
- 同步动画：进度条、波浪效果
- 成功反馈：绿色闪现、勾选动画
- 错误反馈：红色抖动、警告图标

性能考虑：
- 优先使用CSS transforms
- 避免影响布局的动画
- 提供禁用动画选项
- 保持60fps流畅度
```

## 图标规范
```
图标系统：
- 基础图标：Codicons（VS Code标准图标）
- 功能图标：Material Icons补充
- 品牌图标：自定义双空间Logo
- 文件类型：根据编程语言区分

图标尺寸：
- 大图标：24px（主要功能）
- 中图标：16px（常用功能）
- 小图标：12px（辅助信息）
- 菜单图标：14px（菜单项）

图标颜色：
- 默认图标：继承文字颜色
- 活跃状态：主色调
- 成功状态：成功色
- 警告状态：警告色
- 禁用状态：50%透明度
```

这个设计方案将IDE双空间插件的核心功能转化为清晰、一致的界面设计，确保用户能够在熟悉的IDE环境中无缝使用新功能，同时保持良好的可用性和视觉体验。